/*
 * Form Input Types - https://developer.mozilla.org/en-US/docs/Learn/Forms/HTML5_input_types
 * Form Validation - https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation
 * Web Aim Creating Accessible Forms - https://webaim.org/techniques/forms/controls
 * Styling Web Forms - https://developer.mozilla.org/en-US/docs/Learn/Forms/Styling_web_forms
 * Advanced Form Styling - https://developer.mozilla.org/en-US/docs/Learn/Forms/Advanced_form_stylin
 *
 * Web Form Usability (Top 10 Practices) - https://www.nngroup.com/articles/web-form-design
 * A Form of Madness - http://diveintohtml5.info/forms.html */

:root {
  --flex-direction: column;
}

/* Viewport Sizes - https://docs.adobe.com/content/help/en/target/using/experiences/vec/mobile-viewports.html */
@media screen and (min-width: 786px) { :root { } }

/* accessible placeholders & labels - https://www.nngroup.com/articles/form-design-placeholders/ */
::placeholder { } /* 4.5:1 contrast ratio for ARIA */

/* Remove tapping delay
 *   https://css-tricks.com/almanac/properties/t/touch-action/
 *   https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action
 */
a, area, button, input, label, select, summary, textarea, [tabindex] {
  -ms-touch-action: manipulation;
  touch-action:     manipulation
}


/* Form proximity effect
     - https://www.nngroup.com/articles/form-design-white-space/?lm=form-design-placeholders&pt=article
*/
form {
  margin: var(--margin);
  width: 100%;
  max-width: var(--max-width);
  flex-direction: var(--flex-direction);
  caret-color: currentcolor; /* https://developer.mozilla.org/en-US/docs/Web/CSS/caret-color */
}
form:focus-within { }
fieldset:focus-within { }
/*
  - https://thatemil.com/blog/2017/07/01/fixing-fieldsets/
  - https://adrianroselli.com/2022/07/use-legend-and-fieldset.html
*/
fieldset {
   /* See https://github.com/twbs/bootstrap/issues/12359 */
   border: solid currentColor;

  /* THIS IS A BUG - https://bugs.chromium.org/p/chromium/issues/detail?id=375693 */
   margin: var(--margin);
}
fieldset[disabled] {}
legend { /* https://thatemil.com/blog/2017/07/01/fixing-fieldsets/ */
  border: inherit;
  background: inherit;
  /* display: contents; */
}
fieldset input { }
fieldset ul, fieldset ol, fieldset dl
  { margin: var(--margin) }
fieldset li
  { list-style: none }

:not(li) > label {
  width: 80ch;
  cursor: pointer;
  padding: var(--margin-collapse-bugfix) var(--line-height);
  display: block;
  margin: var(--margin-collapse-bugfix) auto var(--margin);
}

:placeholder-shown {
  text-overflow: ellipsis;
}

output {
  display: inline-block;
  margin: var(--p-margin);
  padding: var(--margin-collapse-bugfix) var(--line-height);
}

button, [role=button], input, select, textarea {
  color: currentColor;
  font-family: inherit;
  letter-spacing: inherit;
  text-align: var(--text-align);
  /*
   * Fix rounded corners in iOS Safari https://github.com/twbs/bootstrap/issues/11586.
   * appearance
   *   - https://developer.mozilla.org/en-US/docs/Web/CSS/appearance
   *   - https://developer.mozilla.org/en-US/docs/Learn/Forms/Advanced_form_styling#appearance_controlling_OS-level_styling
   */
  -webkit-appearance: none;
          appearance: none;
}

select, textarea, output,
input:not([type]), input[type=text], input[type=password], input[type=search],
input[type=color], input[type=url], input[type=email], input[type=tel], input[type=number], input[type=range],
input[type=date], input[type=time], input[type=datetime], input[type=datetime-local], input[type=month], input[type=week]
{ /* https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#%3Cinput%3E_types */
  display: list-item;
  max-width: 62ch;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-size: var(--larger);
  border: solid currentColor;
  border-width: 0 0 0.1em 0.1em;
  padding: 0 var(--line-height);
  line-height: var(--line-height);
  margin: var(--margin-collapse-bugfix) auto var(--margin);
  -webkit-user-select: text; /* Safari - https://caniuse.com/?search=user-select */
          user-select: text; /* https://developer.mozilla.org/en-US/docs/Web/CSS/user-select */
}
input, select, textarea, output
 { width: 90% }

label input, label select, label textarea, label output
 { width: 100% }

[type=search] {
    margin: 0;
    flex: 1 50%;
    padding: 0 1em;
    background: none;
    text-align: left;
    outline-offset: -2px;
    -webkit-appearance: textfield;
            appearance: textfield;
}
/* Remove the inner padding in Chrome and Safari on macOS. */
[type=search]::-webkit-search-decoration
 { -webkit-appearance: none }
/* Remove 'x' icon from search */
[type=search]::-webkit-search-cancel-button { }
[role=search] {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  background: green;
  border-bottom: 0.1em solid;
}
[role=search] label {
  background: pink;
  flex: 1 100%;
  font-size: 1em;
  text-align: left;
  height: 1em;
  line-height: 1em;
}
[role=search]
  [type=search] {
    height: 2em;
    font-size: 1em;
    line-height: 2em;
    border-bottom: none;
    animation: none !important;
    border-top: 1em solid rgba(0,0,0,0.001);
  }
[role=search]
  [type=search]:placeholder-shown {
  }

[role=search]
  input[type=submit] {
    margin: 0;
    padding: 0;
    border: none;
}
[role=search] input[type=submit] {
   height: 2em;
   font-size: 1em;
}
[role=search]
  footer {
    flex:1 100%;
    background:pink;
    text-align: right;
}

[type=number]::-webkit-inner-spin-button,
[type=number]::-webkit-outer-spin-button
  { height: auto }

/*
 * - http://danielstern.ca/range.css
 * - Cross browser range inputs - https://css-tricks.com/styling-cross-browser-compatible-range-inputs-css/
*/
input[type=range] {
  border: none;
  height: 0.618em;
  padding: 0.618em;
  cursor: ew-resize;
  box-shadow: inset 0 0 0.0618em;
  border-radius: 0.618em;
}
[type=range]::-webkit-slider-thumb {
  -webkit-appearance: revert;
    appearance: revert;
}
[type=range]::-ms-track {}

/* checksboxes & radios */
[type=checkbox], [type=radio] {
  margin: 0;
  width: 1.0em;
  height: 1.0em;
  cursor: pointer;
  /* Adjusts the position of the checkboxes on the text baseline */
  vertical-align: middle;
  border: 0.05em solid GrayText;
  -webkit-appearance: revert;
  appearance: revert;
}

[type=radio]:before, [type=checkbox]:before {
  content: ' ';
  width: 0.8em;
  height: 0.8em;
  vertical-align: top;
  transition: all 0.3s ease-in;
  transform: translate(0em, 0.02em) scale(0)
}
[type=radio]:checked:before,
[type=checkbox]:checked:before {
  transition: all 0.3s ease-in;
  transform: translate(0em, 0.02em) scale(1);
}
/* radio */
[type=radio]
  { border-radius: 0.5em }
[type=radio]:before {
  border-radius: 50%;
}
[type=radio]:checked {}
[type=radio]:checked:before {}
/* checkbox */
[type=checkbox] {}
[type=checkbox]:before
  { content: '' }
[type=checkbox]:checked {}
[type=checkbox]:checked:before {}

/* "pressed" button
 * aria-pressed - https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/button_role#Associated_ARIA_roles_states_and_properties
 * aria-label   - 
 */
[aria-pressed=true]  {}
[aria-pressed=false] {}


/* CSS TOGGLES [role=switch] https://tabatkins.github.io/css-toggle/
  - WHAT ARE CSS TOGGLES - https://toggles.oddbird.net/
  - Explainer proposal - https://css.oddbird.net/toggles/explainer/
  - *** https://blog.logrocket.com/advanced-guide-css-toggle-pseudo-class/
  - https://www.lambdatest.com/blog/top-20-css-toggle-switches-with-examples/
  - PROPOSAL - https://github.com/w3c/csswg-drafts/issues/6991
  - https://www.bram.us/2022/04/20/the-future-of-css-css-toggles/
  - https://github.com/whatwg/html/issues/5625
  - https://inclusive-components.design/toggle-button/
  - https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Switch_role
  - https://developer.apple.com/design/human-interface-guidelines/ios/controls/switches/
 */
[type=checkbox].toggle {
  width: 2em;
  border-radius: 2em;
  transition: all 0.3s;
  background: GrayText;
}
[type=checkbox].toggle:checked
  { background: ButtonFace }
[type=checkbox].toggle:before {
  content: ' ';
  width: 1em;
  height: 1em;
  border-radius: 50%;
  transition: all 0.4s;
  background: ButtonFace;
  border: 0.05em solid GrayText;
  transform: translate(-0.5em, -0.05em)
}
[type=checkbox].toggle:checked {}
[type=checkbox].toggle:checked:before {
  transition: all 0.4s;
  transform: translate(0.5em, -0.05em)
}

[type=date], [type=time], [type=datetime-local], [type=month]
/* https://bugs.webkit.org/show_bug.cgi?id=139848
  and https://github.com/twbs/bootstrap/issues/11266 */
 { -webkit-appearance: listbox }

input[list] { /* combobox */ }

input[type=file] {
  height: 0;
  padding: 0;
  opacity: 0;
}
input[type=file]::-webkit-file-upload-button {
  -webkit-appearance: button;
          appearance: button
}
input[type=file]::-moz-file-upload-button {
  -webkit-appearance: button;
          appearance: button
}

/* input[type=color]
    - https://css-tricks.com/color-inputs-a-deep-dive-into-cross-browser-differences/
    - 
*/
input[type=color] {
  opacity: 1.0;
  border: none;
  padding: initial;
  cursor: context-menu;
  height: var(--line-height);
  box-shadow: var(--box-shadow);
}
[type=color]::before {
  z-index: 1;
  content: 'ðŸŽ¨';
  position: relative;
}
::-webkit-color-swatch-wrapper {
  top: -1.6182em;
  position: relative;
  background: ButtonFace;
  border-radius: inherit;
}
input[type=color]:hover::-webkit-color-swatch-wrapper {
  border: none;
  background: Canvas;
  border-radius: inherit;
}
::-webkit-color-swatch {
  border: none;
  margin: 0.1618em;
  border-radius: inherit;
}

textarea {
  overflow: auto; /* Remove IE vertical scrollbar. */
  padding: 0.618e;
  resize: vertical;
  text-align: left;
  overflow-y: scroll;
  white-space: unset;
}

select {
   /* Remove inheritance word wrap in Safari https://github.com/twbs/bootstrap/issues/24990 */
   cursor: context-menu;
   border-radius: 0.5em;
   margin: var(--margin);
   box-shadow: var(--box-shadow);
   text-align-last: var(--text-align);
}
select[multiple] {
  padding: 0;
  overflow-x: clip;
  overflow-y: scroll;
  text-overflow: ellipsis;
}
select[multiple]:focus-visible {
  overflow-x: scroll;
}

select:not([multiple]) {
  background: /* https://css-tricks.com/styling-a-select-like-its-2019/*/
    url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E') right .6em top 50% / .65em auto no-repeat ButtonFace;
}

select[multiple] optgroup {
  margin-top: 0.618em;
  background: ButtonFace;
}
select[multiple] optgroup, select[multiple] optgroup :first-child {
border-top: 0.0618em solid ButtonText;
}
select[multiple] optgroup option {}
select[multiple] optgroup option {}

option {
  overflow-x: clip; /* https://kilianvalkhof.com/2022/css-html/do-you-know-about-overflow-clip/ */
  color: currentColor;
  padding: 0 var(--line-height);
  line-height: var(--line-height);
}
:focus option
  { overflow-x: visible }

dialog {
  left: 0;
  right: 0;
  margin: auto;
  border: solid;
  display: block;
  position: absolute;

  height: -moz-fit-content;
  height: -webkit-fit-content;
  height: fit-content;

  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content
}

dialog:not([open])
  { display: none }

button, [type=button], [type=submit], [type=reset], [role=button] {
  /* ARIA - https://www.w3.org/TR/wai-aria-1.1/#button */
  width: max-content;
  background: buttonFace;
  display: inline-block;
  border-radius: 0.1618em;
  font-size: var(--larger);
  -webkit-appearance: button;
          appearance: button;
  box-shadow: var(--box-shadow);
  line-height: var(--line-height);
  border: 0.0168em solid currentColor;
  margin: var(--margin-collapse-bugfix) 0.67em 0.67em;
  padding: var(--margin-collapse-bugfix) var(--line-height);
}
button:not(:disabled), [type=button]:not(:disabled),
[type=submit]:not(:disabled), [type=reset]:not(:disabled), [role=button]:not([aria-disabled=true])
{
  opacity: 70%;
  cursor: pointer;
}
button:not(:disabled):hover, [type=button]:not(:disabled):hover,
[type=submit]:not(:disabled):hover, [type=reset]:not(:disabled):hover, [role=button]:not([aria-disabled=true]):hover
  { opacity: 100% }
button:focus, [type=button]:focus, [type=submit]:focus, [type=reset]:focus, [role=button]:focus
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:focus */ }

/*
  - input Pseudo-classes - https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#ui_pseudo-classes
*/
:default
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:default */ }
:indeterminate
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:indeterminate */ }
:blank /* https://github.com/w3c/csswg-drafts/issues/1967*/
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:blank */ }
:empty
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:empty */ }
:read-write
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:read-write */ }
:read-only
  { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:read-only */ }
input[type=text]:read-only,
input:not([type]):read-only
  { cursor: not-allowed }

/* OPTIONAL */
:optional:not(:disabled) { /* https://developer.mozilla.org/en-US/docs/Web/CSS/:optional */
  /* opacity: 70%; */
}
/* REQUIRED */
:required, [required], [aria-required=true] {
  /*
    - https://developer.mozilla.org/en-US/docs/Web/CSS/:required
    - https://developer.mozilla.org/en-US/docs/Learn/Forms/UI_pseudo-classes#Using_generated_content_with_pseudo-classes
  */
  opacity: 100%;
}


/* VALID */
/* Styling validation using content
 *   - https://developer.mozilla.org/en-US/docs/Learn/Forms/UI_pseudo-classes#Styling_controls_based_on_whether_their_data_is_valid
*/
:user-valid
  { /* https://caniuse.com/mdn-css_selectors_user-valid */ }
input:valid::before, input:in-range::before,
select:valid::before, textarea:invalid::before,, [aria-invalid=false]::before {
  content: ' ';
}

/* INVALID */
:user-invalid
  { /* https://caniuse.com/mdn-css_selectors_user-invalid */ }
input:invalid:not(:placeholder-shown), textarea:invalid:not(:placeholder-shown), input:out-of-range:not(:placeholder-shown), select:invalid:not(:placeholder-shown), [aria-invalid=true]:not(:placeholder-shown) {
  accent-color: ActiveText;
  color:        ActiveText;
  cursor:       not-allowed;
}
input:invalid::before, input:out-of-in-range::before,
select:invalid::before, textarea:invalid::before, [aria-invalid=false]::before {
  content: 'âœ–';
}
